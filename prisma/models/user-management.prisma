model UserPreference {
  id                String   @id @default(cuid())
  userId            String   @unique
  user              User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  // Voice settings
  voiceEnabled      Boolean  @default(true)
  voiceSpeed        Float    @default(1.0)
  voiceLanguage     String   @default("en-US")
  autoRead          Boolean  @default(false)
  
  // UI preferences
  theme             String   @default("system")
  compactMode       Boolean  @default(false)
  sidebarCollapsed  Boolean  @default(false)
  
  // Notification settings
  emailNotify       Boolean  @default(true)
  pushNotify        Boolean  @default(false)
  smsNotify         Boolean  @default(false)
  weeklyDigest      Boolean  @default(true)
  
  // Learning preferences
  dailyGoalMinutes  Int      @default(30)
  difficultyLevel   String   @default("adaptive")
  reminderTime      String?
  
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

model AuditLog {
  id                String   @id @default(cuid())
  userId            String?
  user              User?    @relation(fields: [userId], references: [id], onDelete: SetNull)
  
  action            String
  resource          String
  resourceId        String?
  oldValue          Json?
  newValue          Json?
  ipAddress         String?
  userAgent         String?
  metadata          Json?
  
  createdAt         DateTime @default(now())
  
  @@index([userId])
  @@index([action])
  @@index([resource])
  @@index([createdAt])
}

model UserSession {
  id                String   @id @default(cuid())
  userId            String
  user              User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  token             String   @unique
  ipAddress         String?
  userAgent         String?
  lastActivityAt    DateTime @default(now())
  expiresAt         DateTime
  
  createdAt         DateTime @default(now())
  
  @@index([userId])
  @@index([token])
}
